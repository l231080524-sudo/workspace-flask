<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Trabajos Pendientes | WORKSPACE</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');
    
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }
    
    body { background: #f0f4f8; color: #1e293b; }

    /* NAVBAR WORKER */
    nav {
      background: #ffffff;
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05);
      border-bottom: 3px solid #2563eb;
      position: sticky;
      top: 0;
      z-index: 100;
    }
    .nav-brand { color: #2563eb; font-weight: 800; font-size: 1.5rem; text-decoration: none; letter-spacing: -1px; }
    .nav-menu { display: flex; gap: 1.5rem; list-style: none; }
    .nav-menu a { color: #64748b; text-decoration: none; font-weight: 500; transition: 0.3s; }
    .nav-menu a:hover { color: #2563eb; }
    .btn-logout { background: #ef4444; color: white !important; padding: 0.5rem 1rem; border-radius: 8px; font-weight: 600; transition: 0.3s; }
    .btn-logout:hover { background: #dc2626; }

    /* CONTENEDOR */
    .container {
      max-width: 1100px;
      margin: 40px auto;
      padding: 0 20px;
    }

    .page-header {
      text-align: center;
      margin-bottom: 50px;
    }
    .page-header h1 {
      font-size: 2.2rem;
      color: #1e293b;
      margin-bottom: 10px;
      font-weight: 700;
    }
    .page-header p {
      color: #64748b;
      font-size: 1.1rem;
    }

    /* SECCIONES */
    .section-block {
      margin-bottom: 60px;
    }

    .section-title {
      font-size: 1.5rem;
      color: #334155;
      margin-bottom: 25px;
      padding-bottom: 10px;
      border-bottom: 2px solid #e2e8f0;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    /* GRID DE TRABAJOS */
    .jobs-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 25px;
    }

    /* TARJETAS */
    .job-card {
      background: white;
      border-radius: 16px;
      padding: 25px;
      box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05);
      transition: transform 0.3s, box-shadow 0.3s;
      border: 1px solid transparent;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .job-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 30px -5px rgba(0,0,0,0.1);
    }

    .job-header h3 {
      font-size: 1.3rem;
      color: #1e293b;
      margin-bottom: 5px;
      font-weight: 600;
    }

    .client-name {
      font-size: 0.9rem;
      color: #64748b;
      font-weight: 500;
      margin-bottom: 15px;
      display: block;
    }

    .job-desc {
      color: #475569;
      font-size: 0.95rem;
      line-height: 1.6;
      margin-bottom: 20px;
      flex-grow: 1;
    }

    .job-footer {
      border-top: 1px solid #f1f5f9;
      padding-top: 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .date-info {
      font-size: 0.85rem;
      color: #94a3b8;
      font-weight: 600;
    }

    /* ESTILOS ESPEC√çFICOS: EN CURSO */
    .card-active {
      border-top: 5px solid #2563eb; /* Azul */
    }
    .btn-details {
      background: #2563eb;
      color: white;
      text-decoration: none;
      padding: 8px 16px;
      border-radius: 8px;
      font-weight: 600;
      font-size: 0.9rem;
      border: none;
      cursor: pointer;
      transition: 0.2s;
    }
    .btn-details:hover { background: #1e40af; }

    /* ESTILOS ESPEC√çFICOS: COMPLETADO */
    .card-completed {
      border-top: 5px solid #10b981; /* Verde */
      background: #f8fafc;
      opacity: 0.9;
    }
    .card-completed h3 { color: #0f172a; text-decoration: line-through; text-decoration-color: #10b981; }
    
    .badge-done {
      background: #dcfce7;
      color: #166534;
      padding: 5px 12px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 700;
      text-transform: uppercase;
    }

    .btn-view-old {
      background: white;
      border: 1px solid #cbd5e1;
      color: #64748b;
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 0.85rem;
      font-weight: 500;
      cursor: pointer;
      transition: 0.2s;
    }
    .btn-view-old:hover { border-color: #10b981; color: #10b981; }

    /* EMPTY STATE */
    .empty-message {
      text-align: center;
      padding: 30px;
      background: white;
      border-radius: 12px;
      color: #94a3b8;
      border: 2px dashed #e2e8f0;
    }

    /* FOOTER */
    footer {
      text-align: center;
      padding: 2rem;
      color: #94a3b8;
      font-size: 0.9rem;
      margin-top: 3rem;
    }

    @media (max-width: 600px) {
      .job-footer { flex-direction: column; align-items: flex-start; gap: 10px; }
      .btn-details, .btn-view-old { width: 100%; }
    }
  </style>
</head>
<body>

  <!-- NAVBAR WORKER -->
  <nav>
    <a href="{{ url_for('perfilw') }}" class="nav-brand">WORKSPACE.</a>
    <ul class="nav-menu">
      <li><a href="{{ url_for('perfilw') }}">Mi Perfil</a></li>
      <li><a href="{{ url_for('proyectow') }}">Buscar Proyectos</a></li>
      <li><a href="{{ url_for('trabajospendientes') }}">Trabajos Pendientes</a></li>
      <li><a href="{{ url_for('logout') }}" class="btn-logout">Cerrar Sesi√≥n</a></li>
    </ul>
  </nav>

  <div class="container">
    
    <div class="page-header">
      <h1>Gesti√≥n de Trabajos</h1>
      <p>Controla tus proyectos activos y revisa tu historial de √©xitos.</p>
    </div>

    <!-- SECCI√ìN 1: PENDIENTES (EN CURSO) -->
    <div class="section-block">
      <h2 class="section-title">üõ†Ô∏è En Curso</h2>
      
      {% if pendientes %}
        <div class="jobs-grid">
          {% for t in pendientes %}
            <div class="job-card card-active">
              <div class="job-header">
                <h3>{{ t.titulo }}</h3>
                <span class="client-name">Cliente: {{ t.cliente }}</span>
              </div>
              
              <p class="job-desc">{{ t.descripcion }}</p>

              <div class="job-footer">
                <span class="date-info">üìÖ Entrega: {{ t.fecha_limite }}</span>
                
                <form method="POST" action="{{ url_for('ver_trabajopendiente') }}">
                  <input type="hidden" name="id" value="{{ t.id }}">
                  <button class="btn-details">Ver Detalles ‚Üí</button>
                </form>
              </div>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <div class="empty-message">No tienes trabajos activos en este momento.</div>
      {% endif %}
    </div>

    <!-- SECCI√ìN 2: COMPLETADOS (HISTORIAL) -->
    <div class="section-block">
      <h2 class="section-title">‚úÖ Historial Finalizado</h2>

      {% if completados %}
        <div class="jobs-grid">
          {% for t in completados %}
            <div class="job-card card-completed">
              <div class="job-header">
                <div style="display:flex; justify-content:space-between; align-items:start;">
                  <h3>{{ t.titulo }}</h3>
                  <span class="badge-done">Pagado</span>
                </div>
                <span class="client-name">Cliente: {{ t.cliente }}</span>
              </div>
              
              <div class="job-footer" style="margin-top: 20px;">
                <span class="date-info" style="color: #16a34a;">üí∞ Pago: ${{ t.pago }}</span>
                
                <form method="POST" action="{{ url_for('ver_trabajopendiente') }}">
                  <input type="hidden" name="id" value="{{ t.id }}">
                  <button class="btn-view-old">Ver Resumen</button>
                </form>
              </div>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <div class="empty-message">A√∫n no has completado ning√∫n trabajo. ¬°Sigue as√≠!</div>
      {% endif %}
    </div>

  </div>

  <footer>
    <p>¬© 2025 WORKSPACE - Tu historial profesional.</p>
  </footer>

</body>
</html>